<!DOCTYPE html>
<html>

<head>
  <title>Login</title>
  <!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/5.0.0/css/bootstrap.min.css"> -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="../css/login.css">
</head>

<body>
  <div id="login-form" class="container">
    <div class="row justify-content-center mt-5">
      <div class="col-md-6">
        <div class="card">
          <div class="card-body">
            <h1 class="card-title">Task Master Login</h1>
            <form onsubmit="event.preventDefault(); login();">
              <div class="mb-3">
                <label for="username" class="form-label">Username</label>
                <input type="text" class="form-control" id="username" placeholder="Enter your username">
                <div id="nameError" class="invalid-feedback"></div>
              </div>
              <div class="mb-3">
                <label for="password" class="form-label">Password</label>
                <input type="password" class="form-control" id="password" placeholder="Enter your password">
                <div id="pwdError" class="invalid-feedback"></div>
              </div>
              <button type="submit" class="btn btn-primary btn-login">Login</button>
              <button type="button" class="btn btn-success btn-signup" id="signupButton">Signup</button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- TODO: what is this for?? -->
  <!-- <script src="https://stackpath.bootstrapcdn.com/bootstrap/5.0.0/js/bootstrap.bundle.min.js"></script> -->
  <!-- Include additional JavaScript files as needed -->
  <script src="../controllers/AuthenticationController.js"></script>
  <script type="text/javascript">
    let authController = new AuthenticationController();

    function login() {
      const username = document.getElementById("username").value;
      const password = document.getElementById("password").value;
      if (validation()) {
        authController.login(username, password);
      }
    }

    function validation() {
      const usernameField = document.getElementById("username");
      const passwordField = document.getElementById("password");

      if (!usernameField.value) {
        document.getElementById("nameError").innerHTML = "Please enter your username";
        usernameField.classList.add("is-invalid");
        return false;
      } else {
        usernameField.classList.remove("is-invalid");
      }

      if (!passwordField.value) {
        document.getElementById("pwdError").innerHTML = "Please enter your password";
        passwordField.classList.add("is-invalid");
        return false;
      } else {
        passwordField.classList.remove("is-invalid");
      }

      return true;
    }

    const signupButton = document.getElementById("signupButton");
    signupButton.addEventListener("click", () => {
      window.location.href = "user_signup.html";
    });


  </script>
</body>

</html>